jQuery(function(c){function t(o){var e;!c("#wcdp-ajax-send")[0].reportValidity()||0!=c("#variation_id").length&&""==c("#variation_id").attr("value")||(c("#wcdp-spinner").show(),c("#wcdp-ajax-button").hide(),e=c("#wcdp-ajax-send").serialize(),c.ajax({type:"POST",url:c("#wcdp-ajax-send").attr("action"),data:e}).done(function(e){var t;!0===e.success?(c(".woocommerce-error").remove(),c("body").trigger("update_checkout"),c("#wcdp-ajax-button").show(),c("#wcdp-spinner").hide(),e.recurring?(c("#createaccount").prop("checked",!0).trigger("change"),c(".create-account:has(#createaccount)").hide()):c(".create-account:has(#createaccount)").show(),a(o)):(t=e.message,e.reload||c("#wcdp-ajax-button").show(),c("#wcdp-spinner").hide(),c("#wcdp-ajax-error").remove(),c("form.checkout.woocommerce-checkout").prepend('<ul class="woocommerce-error" id="wcdp-ajax-error" role="alert"><li></li></ul>'),c("#wcdp-ajax-error li").text(t))}).fail(function(e){c("#wcdp-spinner").hide(),c("#ajax-unexpected-error").show()}))}c("#wcdp-ajax-send").on("submit",function(e){e.preventDefault(),t("2")});let e=0;c(".wcdp-body > #wcdp-ajax-send").on("input blur keyup paste change",function(){e++,setTimeout(function(){e--,0==e&&t()},1300)});let o=1;function a(e){switch(c(":root")[0].style.setProperty("--wcdp-step-2","var(--wcdp-main)"),c(":root")[0].style.setProperty("--wcdp-step-3","var(--wcdp-main)"),e){case"3":c("#wcdp-step-2").show(),c("form.checkout").find(".input-text:visible, select:visible, input:checkbox:visible").trigger("validate"),0<c("#wcdp-step-2 .woocommerce-invalid:visible").length?(c("#wcdp-invalid-fields").show(),c("#place_order").hide()):(c("#wcdp-invalid-fields").hide(),c("#place_order").show()),c(":root")[0].style.setProperty("--wcdp-step-3","var(--wcdp-main-2)");case"2":c(":root")[0].style.setProperty("--wcdp-step-2","var(--wcdp-main-2)");case"1":break;default:return}c("#wcdp-progress-bar").css("width",33.33*(parseInt(e)-1)+"%"),c(".wcdp-tab").hide(),c("#wcdp-step-"+e).show(),o=e}c(".wcdp-button,.wcdp-step").click(function(){var e=c(this).attr("value");1!=o?a(e):1!=e&&t(e)}),c(document).ready(function(){c(".woocommerce-checkout select").selectWoo(),c(".wcdp-loader").hide(),c(".wc-donation-platform").css({visibility:"visible","animation-name":"wcdp-appear-animation","animation-duration":"1s"}),d(),c(".wcdp-choose-donation")[0].checkValidity()&&t()}),window.onhashchange=function(){d()},c(document).on("keypress","input",function(e){"Escape"==e.key&&i()}),c(".wcdp-modal-close").click(i);var n=!1;function i(){n&&(c(".wcdp-overlay").hide(),c("body").css("overflow-y"," auto"),history.pushState("",document.title,window.location.pathname+window.location.search),n=!1)}function d(){"#wcdp-form"==location.hash&&0<c(".wcdp-overlay").length&&(c(".wcdp-overlay").show(),c("body").css("overflow-y","hidden"),n=!0)}c(".wcdp_options").change(function(e){var t=this.attributes["wcdp-name"].value,o=c('input[name="'+t+'"]:checked').val();o&&(c("#wcdp-"+t).val(o),c("#"+t).val(o),c("#"+t).trigger("change"))}),c("#wcdp-range").on("input",function(){c("#wcdp-donation-amount").val(c("#wcdp-range").val()),c("#wcdp-range").val()==c("#wcdp-range").attr("max")&&c("#wcdp-donation-amount").select()}),c(".wcdp-amount-range-field").on("input",function(){c("#wcdp-range").val(c("#wcdp-donation-amount").val())}),c("#wcdp-donation-amount").on("change",function(e){var t="#wcdp_value_"+c("#wcdp-donation-amount").val().replace(/./g,"-");(0==c(t).length?c("#wcdp_value_other"):c(t)).prop("checked",!0)}),c("#wcdp_value_other").click(function(){c("#wcdp-donation-amount").focus()}),c(".wcdp-choose-donation").on("change",function(e){c(".wcdp_su input").each(function(e){0==c("#"+this.name+' option[value="'+this.value+'"]').length?this.setAttribute("disabled","true"):this.removeAttribute("disabled")})})});
