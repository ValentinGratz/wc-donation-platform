jQuery((function(e){function t(t){if(e("#wcdp-ajax-send")[0].reportValidity()&&(0==e("#variation_id").length||""!=e("#variation_id").attr("value"))){e("#wcdp-spinner").show(),e("#wcdp-ajax-button").hide();const c=e("#wcdp-ajax-send").serialize();e.ajax({type:"POST",url:e("#wcdp-ajax-send").attr("action"),data:c}).done((function(c){switch(c.success){case!0:e(".woocommerce-error").remove(),e("body").trigger("update_checkout"),e("#wcdp-ajax-button").show(),e("#wcdp-spinner").hide(),c.recurring?(e("#createaccount").prop("checked",!0).trigger("change"),e(".create-account:has(#createaccount)").hide()):e(".create-account:has(#createaccount)").show(),a(t);break;default:!function(t,c){c||e("#wcdp-ajax-button").show();e("#wcdp-spinner").hide(),e("#wcdp-ajax-error").remove(),e("form.checkout.woocommerce-checkout").prepend('<ul class="woocommerce-error" id="wcdp-ajax-error" role="alert"><li></li></ul>'),e("#wcdp-ajax-error li").text(t)}(c.message,c.reload)}})).fail((function(t){e("#wcdp-spinner").hide(),e("#ajax-unexpected-error").show()}))}}e("#wcdp-ajax-send").on("submit",(function(e){e.preventDefault(),t("2")}));let c=0;e(".wcdp-body > #wcdp-ajax-send").on("input blur keyup paste change",(function(){c++,setTimeout((function(){c--,0==c&&t()}),1300)}));let o=1;function a(t){switch(e(":root")[0].style.setProperty("--wcdp-step-2","var(--wcdp-main)"),e(":root")[0].style.setProperty("--wcdp-step-3","var(--wcdp-main)"),t){case"3":e("#wcdp-step-2").show(),e("form.checkout").find(".input-text:visible, select:visible, input:checkbox:visible").trigger("validate"),e("#wcdp-step-2 .woocommerce-invalid:visible").length>0?(e("#wcdp-invalid-fields").show(),e("#place_order").hide()):(e("#wcdp-invalid-fields").hide(),e("#place_order").show()),e(":root")[0].style.setProperty("--wcdp-step-3","var(--wcdp-main-2)");case"2":e(":root")[0].style.setProperty("--wcdp-step-2","var(--wcdp-main-2)");case"1":break;default:return}e(".wcdp-style5-active").removeClass("wcdp-style5-active"),e("#wcdp-style5-step-"+t).addClass("wcdp-style5-active"),e("#wcdp-progress-bar").css("width",33.33*(parseInt(t)-1)+"%"),e(".wcdp-tab").hide(),e("#wcdp-step-"+t).show(),o=t}e(".wcdp-button,.wcdp-step").click((function(){const c=e(this).attr("value");1!=o?a(c):1!=c&&t(c)})),e(document).ready((function(){e(".woocommerce-checkout select").selectWoo(),e(".wcdp-loader").hide(),e(".wc-donation-platform").css({visibility:"visible","animation-name":"wcdp-appear-animation","animation-duration":"1s"}),d(!1),e(".wcdp-choose-donation")[0].checkValidity()&&t()})),window.onhashchange=function(){d(!1)},e(".wcdp-modal-open").click((function(){d(!0)})),e(document).on("keypress","input",(function(e){"Escape"==e.key&&i()})),e(".wcdp-modal-close").click(i);var n=!1;function i(){n&&(e(".wcdp-overlay").hide(),e("body").css("overflow-y"," auto"),history.pushState("",document.title,window.location.pathname+window.location.search),n=!1)}function d(t){(t||"#wcdp-form"==location.hash&&e(".wcdp-overlay").length>0)&&(e(".wcdp-overlay").show(),e("body").css("overflow-y","hidden"),n=!0)}e(".wcdp_options").change((function(t){var c=this.attributes["wcdp-name"].value,o=e('input[name="'+c+'"]:checked').val();o&&(e("#wcdp-"+c).val(o),e("#"+c).val(o),e("#"+c).trigger("change"))})),e("#wcdp-range").on("input",(function(){e("#wcdp-donation-amount").val(e("#wcdp-range").val()),e("#wcdp-range").val()==e("#wcdp-range").attr("max")&&e("#wcdp-donation-amount").select()})),e(".wcdp-amount-range-field").on("input",(function(){e("#wcdp-range").val(e("#wcdp-donation-amount").val())})),e("#wcdp-donation-amount").on("change",(function(t){var c="#wcdp_value_"+e("#wcdp-donation-amount").val().replace(/./g,"-");0==e(c).length?e("#wcdp_value_other").prop("checked",!0):e(c).prop("checked",!0)})),e("#wcdp_value_other").click((function(){e("#wcdp-donation-amount").focus()})),e(".wcdp-choose-donation").on("change",(function(t){e(".wcdp_su input").each((function(t){0==e("#"+this.name+' option[value="'+this.value+'"]').length?this.setAttribute("disabled","true"):this.removeAttribute("disabled")}))}))}));
