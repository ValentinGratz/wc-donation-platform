jQuery((function(e){function t(t){if(function(t){try{return e(t)[0].reportValidity()&&(0==e("#variation_id").length||""!=e("#variation_id").attr("value"))}catch(e){return!1}}("#wcdp-ajax-send")){e("#wcdp-spinner").show(),e("#wcdp-ajax-button").hide();const c=e("#wcdp-ajax-send").serialize();e.ajax({type:"POST",url:e("#wcdp-ajax-send").attr("action"),data:c}).done((function(c){if(!0===c.success)e(".woocommerce-error").remove(),e("body").trigger("update_checkout"),e("#wcdp-ajax-button").show(),e("#wcdp-spinner").hide(),c.recurring?(e("#createaccount").prop("checked",!0).trigger("change"),e(".create-account:has(#createaccount)").hide()):e(".create-account:has(#createaccount)").show(),i(t);else!function(t,c){c||e("#wcdp-ajax-button").show();e("#wcdp-spinner").hide(),e("#wcdp-ajax-error").remove(),e("form.checkout.woocommerce-checkout").prepend('<ul class="woocommerce-error" id="wcdp-ajax-error" role="alert"><li></li></ul>'),e("#wcdp-ajax-error li").text(t)}(c.message,c.reload)})).fail((function(){e("#wcdp-spinner").hide(),e("#ajax-unexpected-error").show()}))}}e("#wcdp-ajax-send").on("submit",(function(e){e.preventDefault(),t("2")}));let c=0;e(".wcdp-body > #wcdp-ajax-send").on("input blur keyup paste change",(function(){c++,setTimeout((function(){c--,0==c&&t()}),1300)}));let o=0,n=0;e(".wcdp-body").on("input blur keyup paste change",(function(){n!=e("#wcdp-donation-amount").val()&&(e(".wcdp-express-amount").val(e("#wcdp-donation-amount").val()),n=e("#wcdp-donation-amount").val(),o++,setTimeout((function(){o--,0==o&&e(document.body).trigger("woocommerce_variation_has_changed")}),500))}));let a=1;function i(t){switch(e(":root")[0].style.setProperty("--wcdp-step-2","var(--wcdp-main)"),e(":root")[0].style.setProperty("--wcdp-step-3","var(--wcdp-main)"),t){case"3":e("#wcdp-step-2").show(),e("form.checkout").find(".input-text:visible, select:visible, input:checkbox:visible").trigger("validate"),e("#wcdp-step-2 .woocommerce-invalid:visible").length>0?(e("#wcdp-invalid-fields").show(),e("#place_order").hide()):(e("#wcdp-invalid-fields").hide(),e("#place_order").show()),e(":root")[0].style.setProperty("--wcdp-step-3","var(--wcdp-main-2)");case"2":e(":root")[0].style.setProperty("--wcdp-step-2","var(--wcdp-main-2)");case"1":break;default:return}e(".wcdp-style5-active").removeClass("wcdp-style5-active"),e("#wcdp-style5-step-"+t).addClass("wcdp-style5-active"),e("#wcdp-progress-bar").css("width",33.33*(parseInt(t)-1)+"%"),e(".wcdp-tab").hide(),e("#wcdp-step-"+t).show(),a=t}e(".wcdp-button,.wcdp-step").click((function(){const c=e(this).attr("value");1!=a?i(c):1!=c&&t(c)}));let d=10;function r(){e("#wc-stripe-payment-request-button").children().length+e("#ppc-button").children().length>0?e(".wcdp-express-heading").show():d<1e4&&(d*=2,setTimeout(r,d))}e(document).ready((function(){e(".woocommerce-checkout select").selectWoo(),e(".wcdp-loader").hide(),e(".wc-donation-platform").css({visibility:"visible","animation-name":"wcdp-appear-animation","animation-duration":"1s"}),u(!1);try{e(".wcdp-choose-donation")[0].checkValidity()&&t()}finally{e("#wcdp-ajax-send,.wcdp_options").trigger("change"),setTimeout(r,d)}})),window.onhashchange=function(){u(!1)},e(".wcdp-modal-open").click((function(){u(!0)})),e(document).on("keypress","input",(function(e){"Escape"==e.key&&s()})),e(".wcdp-modal-close").click(s);var p=!1;function s(){p&&(e(".wcdp-overlay").hide(),e("body").css("overflow-y"," auto"),history.pushState("",document.title,window.location.pathname+window.location.search),p=!1)}function u(t){const c=e(".wcdp-overlay");(t||"#wcdp-form"==location.hash&&c.length>0)&&(c.show(),e("body").css("overflow-y","hidden"),p=!0)}e(".wcdp_options").change((function(){var t=this.attributes["wcdp-name"].value,c=e('input[name="'+t+'"]:checked').val();c&&(e("#wcdp-"+t).val(c),e("#"+t).val(c),e("#"+t).trigger("change"))})),e(document).on("change","#wcdp_fee_recovery",(function(){setTimeout((function(){e("body").trigger("update_checkout")}),400)})),e(document).on("change","input[name='payment_method']",(function(){e("#wcdp_fee_recovery").prop("checked")&&setTimeout((function(){e("body").trigger("update_checkout")}),400)})),e("#wcdp-range").on("input",(function(){e("#wcdp-donation-amount").val(e("#wcdp-range").val()),e("#wcdp-range").val()==e("#wcdp-range").attr("max")&&e("#wcdp-donation-amount").select()})),e(".wcdp-amount-range-field").on("input",(function(){e("#wcdp-range").val(e("#wcdp-donation-amount").val())})),e("#wcdp-donation-amount").on("change",(function(){var t="#wcdp_value_"+e("#wcdp-donation-amount").val().replace(/./g,"-");0==e(t).length?e("#wcdp_value_other").prop("checked",!0):e(t).prop("checked",!0)})),e("#wcdp_value_other").click((function(){e("#wcdp-donation-amount").focus()})),e(".wcdp-choose-donation").on("change",(function(){e(".wcdp_su input").each((function(){0==e("#"+this.name+' option[value="'+this.value+'"]').length?this.setAttribute("disabled","true"):this.removeAttribute("disabled")}))}))}));
