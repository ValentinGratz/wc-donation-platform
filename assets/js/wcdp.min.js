jQuery((function(e){let t;function c(t){if(function(t){try{return e(t)[0].reportValidity()&&(0==e("#variation_id").length||""!=e("#variation_id").attr("value"))}catch(e){return!1}}("#wcdp-ajax-send")){e("#wcdp-spinner").show(),e("#wcdp-ajax-button").hide();const c=e("#wcdp-ajax-send"),o=c.serialize();e.ajax({type:"POST",url:c.attr("action"),data:o}).done((function(c){if(!0===c.success)e(".woocommerce-error").remove(),e("body").trigger("update_checkout"),e("#wcdp-ajax-button").show(),e("#wcdp-spinner").hide(),c.recurring?(e("#createaccount").prop("checked",!0).trigger("change"),e(".create-account:has(#createaccount)").hide()):e(".create-account:has(#createaccount)").show(),r(t);else n(c.message,c.reload)})).fail((function(){e("#wcdp-spinner").hide(),n(e(".wcdp-choose-donation").attr("wcdp-error-default"))}))}}function n(t="An unexpected error occurred. Please reload the page and try again. If the problem persists, please contact our support team.",c=!0){c||e("#wcdp-ajax-button").show(),e("#wcdp-spinner").hide(),e("#wcdp-ajax-error").remove(),e("form.checkout.woocommerce-checkout").prepend('<ul class="woocommerce-error" id="wcdp-ajax-error" role="alert"><li></li></ul>'),e("#wcdp-ajax-error li").text(t)}e("#wcdp-ajax-send").on("submit",(function(n){n.preventDefault();const o=e("#wcdp-ajax-send").serialize();t!=o?(t=o,c("2")):r(2)}));let o=0;e(".wcdp-body > #wcdp-ajax-send").on("input blur keyup paste change",(function(){t!=e("#wcdp-ajax-send").serialize()&&(o++,t=e("#wcdp-ajax-send").serialize(),setTimeout((function(){o--,0==o&&c()}),1300))}));let a=0,i=0;e(".wcdp-body").on("input blur keyup paste change",(function(){e(".wcdp-express-amount").val(e("#wcdp-donation-amount").val()),a++,setTimeout((function(){a--,0==a&&i!=e("#wcdp-donation-amount").val()&&(i=e("#wcdp-donation-amount").val(),e(document.body).trigger("woocommerce_variation_has_changed"))}),500)}));let d=1;function r(t){const c=e(":root")[0];switch(c.style.setProperty("--wcdp-step-2","var(--wcdp-main)"),c.style.setProperty("--wcdp-step-3","var(--wcdp-main)"),t){case"3":e("#wcdp-step-2").show(),e("form.checkout").find(".input-text:visible, select:visible, input:checkbox:visible").trigger("validate"),e("#wcdp-step-2 .woocommerce-invalid:visible").length>0?(e("#wcdp-invalid-fields").show(),e("#place_order").hide()):(e("#wcdp-invalid-fields").hide(),e("#place_order").show()),c.style.setProperty("--wcdp-step-3","var(--wcdp-main-2)");case"2":c.style.setProperty("--wcdp-step-2","var(--wcdp-main-2)");break;case"1":break;default:return}e(".wcdp-style5-active").removeClass("wcdp-style5-active"),e("#wcdp-style5-step-"+t).addClass("wcdp-style5-active"),e("#wcdp-progress-bar").css("width",33.33*(parseInt(t)-1)+"%"),e(".wcdp-tab").hide(),e("#wcdp-step-"+t).show(),d=t}e(".wcdp-button,.wcdp-step").click((function(){const n=e(this).attr("value");1!=d?r(n):1!=n&&(t!=e("#wcdp-ajax-send").serialize()?(t=e("#wcdp-ajax-send").serialize(),c(n)):r(n))}));let p=10;function s(){e("#wc-stripe-payment-request-button").children().length+e("#ppc-button").children().length>0?e(".wcdp-express-heading").show():p<1e4&&(p*=2,setTimeout(s,p))}e(document).ready((function(){e(".wcdp-loader").hide(),e(".wc-donation-platform").css({visibility:"visible","animation-name":"wcdp-appear-animation","animation-duration":"1s"}),w(!1);try{0!=e("#wcdp-donation-amount").val()&&e("#wcdp-ajax-send").trigger("change"),e(".wcdp-choose-donation")[0].checkValidity()&&(t=e("#wcdp-ajax-send").serialize(),c()),e(".woocommerce-checkout select").selectWoo()}finally{e("#wcdp-ajax-send,.wcdp_options").trigger("change"),setTimeout(s,p)}})),window.onhashchange=function(){w(!1)},e(".wcdp-modal-open").click((function(){w(!0)})),e(document).on("keypress","input",(function(e){"Escape"==e.key&&l()})),e(".wcdp-modal-close").click(l);var u=!1;function l(){u&&(e(".wcdp-overlay").hide(),e("body").css("overflow-y"," auto"),history.pushState("",document.title,window.location.pathname+window.location.search),u=!1)}function w(t){const c=e(".wcdp-overlay");(t||"#wcdp-form"==location.hash&&c.length>0)&&(c.show(),e("body").css("overflow-y","hidden"),u=!0)}e(".wcdp_options").change((function(){var t=this.attributes["wcdp-name"].value,c=e('input[name="'+t+'"]:checked').val();if(c){e("#wcdp-"+t).val(c);const n=e("#"+t);n.val(c),n.trigger("change")}})),e(document).on("change","#wcdp_fee_recovery",(function(){setTimeout((function(){e("body").trigger("update_checkout")}),400)})),e(document).on("change","input[name='payment_method']",(function(){e("#wcdp_fee_recovery").prop("checked")&&setTimeout((function(){e("body").trigger("update_checkout")}),400)})),e("#wcdp-range").on("input",(function(){const t=e("#wcdp-range"),c=e("#wcdp-donation-amount");c.val(t.val()),t.val()==t.attr("max")&&c.select()})),e(".wcdp-amount-range-field").on("input",(function(){e("#wcdp-range").val(e("#wcdp-donation-amount").val())})),e("#wcdp-donation-amount").on("change",(function(){var t="#wcdp_value_"+e("#wcdp-donation-amount").val().replace(/./g,"-");0==e(t).length?e("#wcdp_value_other").prop("checked",!0):e(t).prop("checked",!0)})),e("#wcdp_value_other").click((function(){e("#wcdp-donation-amount").focus()})),e(".wcdp-choose-donation").on("change",(function(){e(".wcdp_su input").each((function(){0==e("#"+this.name+' option[value="'+this.value+'"]').length?this.setAttribute("disabled","true"):this.removeAttribute("disabled")}))}))}));